{% extends "layout.html" %}

{% block title %}Calendar{% endblock %}

{% block main %}
<div class="container py-4">
    <div class="card shadow-sm border-0 rounded-4 p-4">
        <h2 class="fw-bold mb-4"><i class="bi bi-calendar3 me-2 text-primary"></i>Assignment Calendar</h2>
        
        <div id="calendar" style="min-height: 600px;"></div>
    </div>
</div>

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      themeSystem: 'bootstrap5',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek'
      },
      // This is where the magic happens: it fetches from your Flask route
      events: '/api/assignments',
      
      eventClick: function(info) {
        alert('Assignment: ' + info.event.title + '\nDue Date: ' + info.event.start.toDateString());
      },
      // Style assignments to match your blue theme
      eventColor: '#0d6efd',
      eventTextColor: '#ffffff'
    });
    calendar.render();
  });
</script>

<style>
    /* Ensure the calendar matches your system theme */
    .fc { max-width: 100%; margin: 0 auto; }
    .fc-toolbar-title { font-weight: bold; font-size: 1.5rem !important; }
    .fc-button-primary { background-color: #0d6efd !important; border-color: #0d6efd !important; }
</style>
{% endblock %}
